<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Web Client</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .card {
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .response-area {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }
        .nav-pills .nav-link.active {
            background-color: #6610f2;
        }
        .btn-primary {
            background-color: #6610f2;
            border-color: #6610f2;
        }
        .btn-primary:hover {
            background-color: #520dc2;
            border-color: #520dc2;
        }
        .connection-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .status-connected {
            background-color: #28a745;
            color: white;
        }
        .status-disconnected {
            background-color: #dc3545;
            color: white;
        }
        .flow-diagram {
            width: 100%;
            height: 200px;
            margin: 20px 0;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        .flow-component {
            width: 120px;
            height: 80px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            position: relative;
            z-index: 2;
        }
        .host {
            background-color: #6610f2;
        }
        .client {
            background-color: #0dcaf0;
        }
        .server {
            background-color: #20c997;
        }
        .flow-arrow {
            height: 40px;
            flex-grow: 1;
            position: relative;
            z-index: 1;
        }
        .flow-arrow::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #adb5bd;
        }
        .flow-arrow::before {
            content: "";
            position: absolute;
            top: 50%;
            right: 0;
            width: 10px;
            height: 10px;
            border-top: 2px solid #adb5bd;
            border-right: 2px solid #adb5bd;
            transform: translateY(-50%) rotate(45deg);
        }
        .flow-arrow.reverse::before {
            right: auto;
            left: 0;
            transform: translateY(-50%) rotate(-135deg);
        }
        .flow-message {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            white-space: nowrap;
        }
        #serverCapabilities {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 class="mb-4 text-center">Model Context Protocol (MCP) Web Client</h1>

        <!-- Introduction -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">About MCP</h5>
                <p class="card-text">
                    The Model Context Protocol (MCP) enables AI models to interact with external tools and resources.
                    This client demonstrates how to connect to an MCP server, discover its capabilities, and execute
                    operations.
                </p>
            </div>
        </div>

        <!-- Connection Panel -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Server Connection</h5>
                <span id="connectionStatus" class="connection-status status-disconnected">Disconnected</span>
            </div>
            <div class="card-body">
                <div class="row align-items-end">
                    <div class="col-md-6">
                        <label for="serverSelect" class="form-label">Example Server</label>
                        <select class="form-select" id="serverSelect">
                            <option value="http://localhost:8000">00-hello-world (localhost:8000)</option>
                            <option value="http://localhost:8001">01-file-explorer (localhost:8001)</option>
                            <option value="http://localhost:8002">02-web-search (localhost:8002)</option>
                            <option value="http://localhost:8003">03-database-query (localhost:8003)</option>
                            <option value="stdio">Use Stdio Transport (local only)</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="customServer" class="form-label">Custom Server URL</label>
                        <input type="text" class="form-control" id="customServer" placeholder="http://localhost:8000">
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-primary w-100" id="connectButton">Connect</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Flow Diagram -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Protocol Flow</h5>
            </div>
            <div class="card-body">
                <div class="flow-diagram">
                    <div class="flow-component host">Host App</div>
                    <div class="flow-arrow">
                        <div class="flow-message" id="requestMessage">Request</div>
                    </div>
                    <div class="flow-component client">MCP Client</div>
                    <div class="flow-arrow">
                        <div class="flow-message" id="mcpRequestMessage">MCP Request</div>
                    </div>
                    <div class="flow-component server">MCP Server</div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="row">
            <!-- Server Capabilities -->
            <div class="col-md-5">
                <div class="card" style="height: calc(100vh - 500px);">
                    <div class="card-header">
                        <h5 class="mb-0">Server Capabilities</h5>
                    </div>
                    <div class="card-body" id="serverCapabilities">
                        <div class="text-center text-muted">
                            <p>Connect to a server to view its capabilities</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interaction Panel -->
            <div class="col-md-7">
                <div class="card">
                    <div class="card-header">
                        <ul class="nav nav-pills card-header-pills" id="operationTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="tools-tab" data-bs-toggle="tab" data-bs-target="#tools"
                                    type="button" role="tab" aria-controls="tools" aria-selected="true">Tools</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources"
                                    type="button" role="tab" aria-controls="resources" aria-selected="false">Resources</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="prompts-tab" data-bs-toggle="tab" data-bs-target="#prompts"
                                    type="button" role="tab" aria-controls="prompts" aria-selected="false">Prompts</button>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="operationTabsContent">
                            <!-- Tools Tab -->
                            <div class="tab-pane fade show active" id="tools" role="tabpanel" aria-labelledby="tools-tab">
                                <h5>Execute Tool</h5>
                                <div class="mb-3">
                                    <label for="toolSelect" class="form-label">Select Tool</label>
                                    <select class="form-select" id="toolSelect">
                                        <option value="">Select a tool...</option>
                                    </select>
                                </div>
                                <div id="toolParams" class="mb-3">
                                    <!-- Dynamic parameters will be inserted here -->
                                </div>
                                <button id="executeTool" class="btn btn-primary">Execute</button>
                                <div class="mt-3">
                                    <h6>Response:</h6>
                                    <div class="response-area" id="toolResponse">
                                        <em>Tool response will appear here...</em>
                                    </div>
                                </div>
                            </div>

                            <!-- Resources Tab -->
                            <div class="tab-pane fade" id="resources" role="tabpanel" aria-labelledby="resources-tab">
                                <h5>Access Resource</h5>
                                <div class="mb-3">
                                    <label for="resourcePattern" class="form-label">Resource Pattern</label>
                                    <select class="form-select" id="resourcePattern">
                                        <option value="">Select a resource pattern...</option>
                                    </select>
                                </div>
                                <div id="resourceParams" class="mb-3">
                                    <!-- Dynamic parameters will be inserted here -->
                                </div>
                                <button id="fetchResource" class="btn btn-primary">Fetch</button>
                                <div class="mt-3">
                                    <h6>Resource Content:</h6>
                                    <div class="response-area" id="resourceResponse">
                                        <em>Resource content will appear here...</em>
                                    </div>
                                </div>
                            </div>

                            <!-- Prompts Tab -->
                            <div class="tab-pane fade" id="prompts" role="tabpanel" aria-labelledby="prompts-tab">
                                <h5>Generate from Prompt</h5>
                                <div class="mb-3">
                                    <label for="promptSelect" class="form-label">Select Prompt</label>
                                    <select class="form-select" id="promptSelect">
                                        <option value="">Select a prompt...</option>
                                    </select>
                                </div>
                                <div id="promptParams" class="mb-3">
                                    <!-- Dynamic parameters will be inserted here -->
                                </div>
                                <button id="generatePrompt" class="btn btn-primary">Generate</button>
                                <div class="mt-3">
                                    <h6>Generated Content:</h6>
                                    <div class="response-area" id="promptResponse">
                                        <em>Generated content will appear here...</em>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Client Script -->
    <script src="mcp-client.js"></script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 